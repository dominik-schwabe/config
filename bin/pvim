#!/usr/bin/env bash

FILE_PATH=$(realpath -m ${1-"."})

read PROGRAM ROOT_PATH <<< $(python_project_root $1)

[[ -n "$ROOT_PATH" ]] && cd $ROOT_PATH
if [[ $PROGRAM == "pdm" ]]; then
	echo "found pdm"
	pdm run $EDITOR $FILE_PATH
elif [[ $PROGRAM == "pipenv" ]]; then
	echo "found pipenv"
	pipenv --venv >/dev/null && pipenv run $EDITOR $FILE_PATH
fi
