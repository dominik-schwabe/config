#!/bin/bash
CLASS=$1
shift
PROGRAM=$1
shift
ARGUMENTS=$@

while :
do
    if ! i3-msg; then
        exit 0
    fi

    if xdotool search --class "$CLASS"
    then
        notify-send -t 5000 -u critical "$PROGRAM exits" &!
        exit 1
    fi
    notify-send -t 500 "starting $PROGRAM" &!
    $PROGRAM $ARGUMENTS
done
